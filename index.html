<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Project Management Quiz</title>
<style>
  :root {
    --bg-color: #f5f5f5;
    --text-color: #222;
    --card-color: #fff;
    --correct-color: #4caf50;
    --wrong-color: #f44336;
    --option-hover: #eee;
  }
  body.dark-mode {
    --bg-color:#121212;
    --text-color:#eee;
    --card-color:#1e1e1e;
    --option-hover:#333;
  }
  body {
    margin:0; padding:10px;
    font-family:Arial,sans-serif;
    background:var(--bg-color);
    color:var(--text-color);
    display:flex; justify-content:center;
  }
  .container {
    width:100%; max-width:480px;
    background:var(--card-color);
    padding:20px; border-radius:12px;
    box-shadow:0 5px 15px rgba(0,0,0,0.2);
  }
  .question img { max-width:100%; margin:10px 0; border-radius:8px;}
  .options button { width:100%; padding:12px; margin:6px 0; border:none; border-radius:8px; cursor:pointer; }
  .correct { background:var(--correct-color); color:#fff; }
  .wrong { background:var(--wrong-color); color:#fff; }
</style>
</head>
<body>

<div class="container">
  <div id="question"></div>
  <div class="options" id="options"></div>
  <button id="nextBtn" onclick="nextQuestion()" disabled>Next</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSGovyAXUEPrHKj8qH2VEITgb424ghBN_uWJWQzYgkAL9jFeldMdO-L1-Rd522rTdyrIyYH/pub?output=csv";

let questions = [];
let current = 0;
let score = 0;

// show images only for these (1-based indices)
const hasImage = [102,127,128,293,320,361];

Papa.parse(csvUrl, {
  download: true,
  header: true,
  skipEmptyLines: true,
  complete: results => {
    questions = results.data.map((row, i) => ({
      q: row.Question,
      options: [row.A,row.B,row.C,row.D],
      answer: row.Answer,
      img: hasImage.includes(i+1) && row.Images ? row.Images : null
    }));
    loadQuestion();
  }
});

function loadQuestion() {
  const q = questions[current];
  document.getElementById("question").innerHTML = q.q + (q.img ? `<br><img src="${q.img}">` : "");
  const opts = document.getElementById("options");
  opts.innerHTML = "";
  q.options.forEach(o=>{
    const btn = document.createElement("button");
    btn.textContent = o;
    btn.onclick = ()=> checkAnswer(btn,o);
    opts.appendChild(btn);
  });
  document.getElementById("nextBtn").disabled = true;
}

function checkAnswer(btn, sel) {
  const correct = questions[current].answer;
  document.querySelectorAll(".options button").forEach(b=> {
    b.disabled = true;
    if(b.textContent === correct) b.classList.add("correct");
    else if(b.textContent === sel) b.classList.add("wrong");
  });
  if(sel === correct) score++;
  document.getElementById("nextBtn").disabled = false;
}

function nextQuestion() {
  current++;
  if(current < questions.length) loadQuestion();
  else alert(`Quiz Finished! Score: ${score}/${questions.length}`);
}
</script>

</body>
</html>
